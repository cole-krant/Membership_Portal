<%- include ('../partials/header') %>
<%- include ('../partials/menu') %>

<main>
  <header>
    <style>
      .maroon_bells_bg {
        background-image: url('../../resources/img/Maroon_Bells.jpg');
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover
      }
      .yellowstone_bg {
        background-image: url('../../resources/img/Yellowstone_Vibes.jpg');
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover
      }
      .profile {
        width:auto;
        height: 50%;
      }
    </style>
  </header>
    <body>

    <!-- MyBrotherhood -->
      <div class="w3-container w3-padding-64 w3-center">
        <h1 style="color:black">MyBrotherhood</h1>
        <h3 style="color:black">Alpha Kappa Psi</h3>
        <%
          var count_col = 0;      // variable to limit 4 cards per row
          var start = 0;          // variable to limit 4 cards per row
          var count_cmp = 4;      // variable to track how many cards have been input per row
          var index = 0;          // variable to track community array
          var pseudo = '';        // variable to code html
          var image = "";
          pseudo = pseudo + '<div class="w3-row">';                         // begin the row row
    
          community.forEach(community => {
            // if(community.username != 'Cole Krant' && community.username != 'Katie McDonald' && community.username != 'Emma Kochenderfer' && community.username != 'Nathan Brown' && community.username != 'Harrison Klein') {
              if(count_col === start) {

                count_col = count_col + 1;
                image = community.pfp_img ? "data:image/png;base64," + community.pfp_img : '../../resources/pfp/Default_Avatar.jpg';
                pseudo = pseudo + '<div class="w3-quarter">';
                  pseudo = pseudo + '<div class="card mb-3" style="background-color:#2B4B80; max-width:300px;">';
                    pseudo = pseudo + '<div class="col">';
                      pseudo = pseudo + '<form action="/community/view_id" method="POST">';
                          pseudo = pseudo + '<img src="' + image +'" class="w3-circle w3-hover-opacity" width="50%" height="60%" alt="Profile Picture">';
                          pseudo = pseudo + '<h3>' + community.name + '</h3>';
                          pseudo = pseudo + '<input type="hidden" value="' + community.user_id +'" name="view_id" id="view_id">';
                          pseudo = pseudo + '<button class="btn btn-light" action="/profile"></button>';
                        pseudo = pseudo + '</form>';
                    pseudo = pseudo + '</div>';
                  pseudo = pseudo + '</div>';
                pseudo = pseudo + '</div>';

                index++;

              }
              else if(count_col < count_cmp) {

                count_col = count_col + 1;                                  // incriment count
                image = community.pfp_img ? "data:image/png;base64," + community.pfp_img : '../../resources/pfp/Default_Avatar.jpg';
                pseudo = pseudo + '<div class="w3-quarter">';                     // same row, input card
                  pseudo = pseudo + '<div class="card mb-3" style="background-color:#2B4B80; max-width:300px">';
                    pseudo = pseudo + '<div class="col">';
                      pseudo = pseudo + '<form action="/community/view_id" method="POST">';
                          pseudo = pseudo + '<img src="' + image +'" class="w3-circle w3-hover-opacity" width="50%" height="60%" alt="Profile Picture">';
                          pseudo = pseudo + '<h3>' + community.name + '</h3>';
                          pseudo = pseudo + '<input type="hidden" value="' + community.user_id +'" name="view_id" id="view_id">';
                          pseudo = pseudo + '<button class="btn btn-light" action="/profile"></button>';
                        pseudo = pseudo + '</form>';
                    pseudo = pseudo + '</div>';
                  pseudo = pseudo + '</div>';
                pseudo = pseudo + '</div>';

                index++;

              }
              else if(count_col === count_cmp) {

                image = community.pfp_img ? "data:image/png;base64," + community.pfp_img : '../../resources/pfp/Default_Avatar.jpg';
                pseudo = pseudo + '</div>';         // close the card
                pseudo = pseudo + '<div class="w3-row">';                         // begin the row row
                  pseudo = pseudo + '<div class="w3-quarter">';                     // create a card
                    pseudo = pseudo + '<div class="card mb-3" style="background-color:#2B4B80; max-width:300px">';
                      pseudo = pseudo + '<div class="col">';
                        pseudo = pseudo + '<form action="/community/view_id" method="POST">';
                          pseudo = pseudo + '<img src="' + image +'" class="w3-circle w3-hover-opacity" width="50%" height="60%" alt="Profile Picture">';
                          pseudo = pseudo + '<h3>' + community.name + '</h3>';
                          pseudo = pseudo + '<input type="hidden" value="' + community.user_id +'" name="view_id" id="view_id">';
                          pseudo = pseudo + '<button class="btn btn-light" action="/profile"></button>';
                        pseudo = pseudo + '</form>';
                      pseudo = pseudo + '</div>';
                    pseudo = pseudo + '</div>';
                  pseudo = pseudo + '</div>';
                start = count_col;                  // indicate new row
                count_cmp = count_cmp + 4;          // set new ceiling

              }
            }
          //}
          ) 
        %>
        <%- pseudo %>
      </div>
  </body>
</main>

<%- include ('../partials/footer') %>